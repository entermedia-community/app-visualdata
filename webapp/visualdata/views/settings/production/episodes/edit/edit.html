<h3>Edit $!data</h3>

<div id="editlayout">
#set( $origURL = $context.getRequestParameter("origURL" ) )
#set( $categoryid = $context.getRequestParameter("categoryid" ) )

#if( !$view )				
	#set( $view = "${searcher.searchType}/edit" )
#end
$context.putPageValue("view", $view)

#set($titlesearcher = $searcherManager.getSearcher($catalogid, "title"))
#set($titleid= $context.getRequestParameter("title.value"))
#set($action= $context.getRequestParameter("action"))
#set($title = $titlesearcher.searchById($titleid))
$context.putPageValue("title",$title)

<form id="dataeditor" name="dataeditor" method="post" action="$home$content.searchhome/edit/save.html" >
	<input name="save" type="hidden" value="true" />
	<input name="id" type="hidden" value="$!data.id" />
	<input name="categoryid" type="hidden" value="$!categoryid" />
	<input name="catalogid" type="hidden" value="$searcher.catalogId" />
	<input name="searchtype" type="hidden" value="$searcher.searchType" />
	<input name="origURL"  type="hidden" value="$!origURL" />
	<input name="field"  type="hidden" value="title" />
	<input name="title.value"  type="hidden" value="$title.id" />
	
#set($titleid = $context.getRequestParameter("title.value"))	
$data.setProperty("title",$titleid)
$pages.include("/system/components/xml/detaileditor.html", $context)


<ul class="embuttons">
<li>
	<a href="#" onclick="jQuery(this).closest('form').submit();"><span>Save</span></a>
</li>
<li><a href="$home$apphome/views/settings/production/episodes/fieldsearch.html?title.value=$!titleid&field=title&operation=matches"><span>Cancel</span></a></li>
#if($action!='add')
<li><a href='$home$content.searchhome/edit/delete.html?searchtype=$searcher.searchType&catalogid=$searcher.catalogId&id=$!data.id'>
	<span>
		Delete
	</span></a>
</li>
#end
</ul>
<div id="messagearea">$!message
</div>
</form>


#if( $savedok && $origURL )
	<a href="$origURL">[[Go Back]]</a>	
#end


</div>
